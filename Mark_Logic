package com.JE.Func_Script;



import java.awt.AWTException;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.StringSelection;
import java.awt.event.KeyEvent;
import java.io.IOException;
import java.sql.SQLException;

import org.openqa.selenium.By;
import org.openqa.selenium.Keys;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.Select;

import com.JE.Utilities.General_Wrapper;
import com.jcraft.jsch.JSchException;
import com.jcraft.jsch.SftpException;

public class Mark_Logic extends General_Wrapper  {
	
	public By result=By.xpath("//*[text()='your query returned an empty sequence']");
	
	
	public void ML_Launcher(String Source_DB, String query,String Unixquerypath) throws InterruptedException, AWTException, ClassNotFoundException, SQLException, JSchException, SftpException, IOException {
		

		String url=ML_URL.replace("http://", "");
		String Finalurl="http://"+ML_Username+":"+ML_Pwd+"@"+url;
		driver.get(Finalurl);
		 
		 Thread.sleep(3000);
		 Select s=new Select(driver.findElement(By.id("source-databases")));
		 s.selectByVisibleText(Source_DB);
		 
		 Select s1=new Select(driver.findElement(By.id("query-type")));
		 s1.selectByVisibleText("XQuery");
		 
		 
		 driver.findElement(By.xpath("//*[@id='query-text-space']/div/div[6]/div[1]/div/div/div/div[5]/div/pre/span/span")).click();
		 Thread.sleep(2000);
		 
	
		 Actions act = new Actions(driver);
		 act.keyDown(Keys.CONTROL).sendKeys("a").keyUp(Keys.CONTROL).build().perform();
		 Thread.sleep(2000);
		 Actions act1 = new Actions(driver);
		 act1.sendKeys(Keys.DELETE).build().perform();
		 Thread.sleep(2000);
		 StringSelection stringSelection = new StringSelection(query);
			Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
			clipboard.setContents(stringSelection, stringSelection);
		 
			 Actions act2 = new Actions(driver);
			 act2.keyDown(Keys.CONTROL).sendKeys("v").keyUp(Keys.CONTROL).build().perform();
	
			 
			 driver.findElement(By.id("run-btn")).click();
			 
			   waitForElement1(result,"result");
			   
			   Thread.sleep(15000);
			  
				 
				   
				   Unix_Caller(Unixquerypath,Download_Path+"Query_Data.txt");
			   
			 
		
		
		
	}
	
	
	
	 
	

}
